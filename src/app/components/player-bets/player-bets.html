<p-card class="players-panel h-full">
    <div class="players-header">
        <span>{{ bets().length }} Players</span>
        <span>Total {{ totalBetsAmount() | currency:'EUR' }}</span>
    </div>

    <div class="players-list">
        @for (bet of bets(); track bet.userId) {
        <div class="player-row" [class.cashed-out]="bet.multiplier">
            <div class="player-info">
                <div class="player-avatar">
                    <img [src]="getAvatarUrl(bet.avatarUrl)" alt="Avatar" class="avatar-img"
                        (error)="bet.avatarUrl = ''">
                </div>
                <!-- Fallback to initials only if image fails not handled nicely here, but 'assets/default-avatar.png' should exist or use onerror to swap -->
                <span class="player-name">{{ bet.username }}</span>
            </div>
            <div class="player-stats">
                @if (bet.multiplier) {
                <span class="cashout-pill">
                    {{ bet.multiplier.toFixed(2) }}x
                </span>
                <span class="profit-amount">
                    +{{ bet.profit | currency:'EUR' }}
                </span>
                } @else {
                <span class="bet-amount">
                    {{ bet.amount | currency:'EUR' }}
                </span>
                }
            </div>
        </div>
        }
    </div>

    <div class="provably-fair-footer">
        <div class="footer-group">
            <i class="pi pi-check-circle"></i>
            <span>Provably Fair</span>
        </div>
        <div class="footer-group" routerLink="/legal">
            <i class="pi pi-info-circle"></i>
            <span>Legal Info</span>
        </div>
    </div>
</p-card>