<div class="controls-panel">
    <div class="quick-bets">
        <button class="pizza-btn" (click)="addToBet(1)" (touchstart)="addToBet(1); $event.preventDefault()">+1€</button>
        <button class="pizza-btn" (click)="addToBet(2)" (touchstart)="addToBet(2); $event.preventDefault()">+2€</button>
        <button class="pizza-btn" (click)="addToBet(5)" (touchstart)="addToBet(5); $event.preventDefault()">+5€</button>
        <button class="pizza-btn" (click)="addToBet(10)"
            (touchstart)="addToBet(10); $event.preventDefault()">+10€</button>
        <button class="pizza-btn transparent" (click)="setBet(0)"
            (touchstart)="setBet(0); $event.preventDefault()">CLEAR</button>
    </div>

    <div class="inputs-row">
        <div class="input-group">
            <div class="input-header">
                <div class="label-group">
                    <label>Bet Amount (€)</label>
                </div>
                <div class="toggle-wrapper">
                    <span>Auto</span>
                    <p-toggleSwitch [(ngModel)]="isAutoBetEnabled"></p-toggleSwitch>
                </div>
            </div>
            <p-inputNumber [(ngModel)]="betAmount" mode="currency" currency="EUR" locale="it-IT" [min]="0.10"
                [max]="100" [step]="0.10" [showButtons]="true" buttonLayout="horizontal"
                incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus">
            </p-inputNumber>
        </div>
        <div class="input-group">
            <div class="input-header">
                <div class="label-group">
                    <label>Cashout At (x)</label>
                </div>
                <div class="toggle-wrapper">
                    <span>Auto</span>
                    <p-toggleSwitch [(ngModel)]="isAutoCashoutEnabled"></p-toggleSwitch>
                </div>
            </div>
            <p-inputNumber [(ngModel)]="autoCashout" [min]="1.01" [max]="100" [step]="0.1" [showButtons]="true"
                buttonLayout="horizontal" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" suffix=" x"
                [disabled]="!isAutoCashoutEnabled">
            </p-inputNumber>
        </div>
    </div>

    <div class="action-row">
        @if (gameState() === 'WAITING') {
        @if (betPlaced) {
        <button class="bet-button cancel-button" (click)="cancelBet()"
            (touchstart)="cancelBet(); $event.preventDefault()">
            CANCEL
            <span class="sub-text">({{ timeLeft() | number:'1.1-1' }}s)</span>
        </button>
        } @else {
        <button class="bet-button" (click)="placeBet()" (touchstart)="placeBet(); $event.preventDefault()">
            BET
            <span class="sub-text">NOW</span>
        </button>
        }
        } @else if (gameState() === 'FLYING') {
        @if (betPlaced && !cashedOut) {
        <button class="bet-button cashout" (click)="cashOut()" (touchstart)="cashOut(); $event.preventDefault()">
            CASHOUT
            <span class="sub-text">{{ (betAmount * multiplier) | currency:'EUR' }}</span>
        </button>
        } @else if (betPlaced && cashedOut) {
        <button class="bet-button" disabled [style.background]="'#4CAF50'" [style.color]="'white'">
            CASHED OUT
            <span class="sub-text">WIN</span>
        </button>
        } @else {
        @if (nextRoundBet) {
        <button class="bet-button cancel-button" (click)="cancelBet()"
            (touchstart)="cancelBet(); $event.preventDefault()">
            CANCEL NEXT BET
            <span class="sub-text">({{ betAmount | currency:'EUR' }})</span>
        </button>
        } @else {
        <button class="bet-button waiting" (click)="placeBet()" (touchstart)="placeBet(); $event.preventDefault()">
            BET NEXT ROUND
            <span class="sub-text">{{ betAmount | currency:'EUR' }}</span>
        </button>
        }
        }
        } @else {
        @if (nextRoundBet) {
        <button class="bet-button cancel-button" (click)="cancelBet()"
            (touchstart)="cancelBet(); $event.preventDefault()">
            CANCEL NEXT BET
            <span class="sub-text">{{ betAmount | currency:'EUR' }}</span>
        </button>
        } @else {
        <button class="bet-button waiting" (click)="placeBet()" (touchstart)="placeBet(); $event.preventDefault()">
            BET NEXT ROUND
            <span class="sub-text">{{ betAmount | currency:'EUR' }}</span>
        </button>
        }
        }
    </div>

</div>